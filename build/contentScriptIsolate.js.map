{"version":3,"file":"contentScriptIsolate.js","sources":["../static/contentScriptIsolate.js"],"sourcesContent":["/*\n  This is the ISOLATED content script! This can communicate with our MAIN content\n  script. It can also communicate with the Popup and Panel. So it's kind of like\n  the middle man of this Chrome extension\n*/\nconsole.log(\"Hello from contentScriptIsolate\");\nlet port = null;\n// Listens to messages from ContentScriptMain\n// and forwards them to other parts of the extension\nwindow.addEventListener(\"message\", async (msg) => {\n  if (\n    typeof msg !== \"object\" ||\n    msg === null ||\n    msg.data?.source !== \"contentScript.js\"\n  ) {\n    // console.log('msg not qualified from contentScriptIsolate msg:', msg)\n    return;\n  }\n\n  console.log(\"Checking returnRootComponent\");\n\n  switch (msg.data.type) {\n    case \"updateRootComponent\":\n    case \"returnRootComponent\":\n    case \"returnTempRoot\":\n      console.log(\"window.addEventListener from contentScriptIsolate, msg: \", msg);\n\n      chrome.runtime.sendMessage({\n        type: msg.data.type,\n        rootComponent: msg.data.rootComponent,\n      });\n      break;\n    case \"returnSvelteVersion\":\n      chrome.runtime.sendMessage({\n        type: msg.data.type,\n        svelteVersion: msg.data.svelteVersion,\n      });\n      break;\n    default:\n      break;\n  }\n});\n\n// Listens for a message from the Popup and Panel\n// Forwards them to ContentScriptMain/index.js\nchrome.runtime.onMessage.addListener(function (request, sender, sendResponse) {\n  console.log('getRootComponent from contentScriptIsolate')\n\n\n  switch (request.message) {\n    case \"getRootComponent\":\n    case \"getSvelteVersion\":\n    case \"handleClosedPanel\":\n\n      console.log(\"getRootComponent from contentScriptIsolate\");\n\n      window.postMessage({\n        // target: node.parent ? node.parent.id : null,\n        type: request.message,\n        source: \"contentScriptIsolate.js\",\n      });\n      \n      break;\n\n    case \"injectState\":\n      window.postMessage({\n        // target: node.parent ? node.parent.id : null,\n        type: request.message,\n        newState: request.newState,\n        componentId: request.componentId,\n        source: \"contentScriptIsolate.js\",\n      });\n      break;\n\n    case \"injectSnapshot\":\n      window.postMessage({\n        type: request.message,\n        snapshot: request.snapshot,\n        source: \"contentScriptIsolate.js\",\n      });\n      break;\n  }\n});\n\n// NOTE: If you're trying to send a message to a listener in a different\n// part of the extension that hasn't been loaded yet, you'll get an error\n// like \"Unchecked runtime.lastError: Could not establish connection.\n// Receiving end does not exist.\" This happened to Alex when he was\n// trying to send a message to a listener inside the Panel component.\n// The Panel component hadn't been rendered yet, so no listener had been added.\n// Don't be like Alex\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA,OAAO,CAAC,GAAG,CAAC,iCAAiC,CAAC,CAAC;AAE/C;AACA;AACA,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,OAAO,GAAG,KAAK;AAClD,EAAE;AACF,IAAI,OAAO,GAAG,KAAK,QAAQ;AAC3B,IAAI,GAAG,KAAK,IAAI;AAChB,IAAI,GAAG,CAAC,IAAI,EAAE,MAAM,KAAK,kBAAkB;AAC3C,IAAI;AACJ;AACA,IAAI,OAAO;AACX,GAAG;AACH;AACA,EAAE,OAAO,CAAC,GAAG,CAAC,8BAA8B,CAAC,CAAC;AAC9C;AACA,EAAE,QAAQ,GAAG,CAAC,IAAI,CAAC,IAAI;AACvB,IAAI,KAAK,qBAAqB,CAAC;AAC/B,IAAI,KAAK,qBAAqB,CAAC;AAC/B,IAAI,KAAK,gBAAgB;AACzB,MAAM,OAAO,CAAC,GAAG,CAAC,0DAA0D,EAAE,GAAG,CAAC,CAAC;AACnF;AACA,MAAM,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC;AACjC,QAAQ,IAAI,EAAE,GAAG,CAAC,IAAI,CAAC,IAAI;AAC3B,QAAQ,aAAa,EAAE,GAAG,CAAC,IAAI,CAAC,aAAa;AAC7C,OAAO,CAAC,CAAC;AACT,MAAM,MAAM;AACZ,IAAI,KAAK,qBAAqB;AAC9B,MAAM,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC;AACjC,QAAQ,IAAI,EAAE,GAAG,CAAC,IAAI,CAAC,IAAI;AAC3B,QAAQ,aAAa,EAAE,GAAG,CAAC,IAAI,CAAC,aAAa;AAC7C,OAAO,CAAC,CAAC;AACT,MAAM,MAAM;AAGZ,GAAG;AACH,CAAC,CAAC,CAAC;AACH;AACA;AACA;AACA,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,WAAW,CAAC,UAAU,OAAO,EAAE,MAAM,EAAE,YAAY,EAAE;AAC9E,EAAE,OAAO,CAAC,GAAG,CAAC,4CAA4C,CAAC,CAAA;AAC3D;AACA;AACA,EAAE,QAAQ,OAAO,CAAC,OAAO;AACzB,IAAI,KAAK,kBAAkB,CAAC;AAC5B,IAAI,KAAK,kBAAkB,CAAC;AAC5B,IAAI,KAAK,mBAAmB;AAC5B;AACA,MAAM,OAAO,CAAC,GAAG,CAAC,4CAA4C,CAAC,CAAC;AAChE;AACA,MAAM,MAAM,CAAC,WAAW,CAAC;AACzB;AACA,QAAQ,IAAI,EAAE,OAAO,CAAC,OAAO;AAC7B,QAAQ,MAAM,EAAE,yBAAyB;AACzC,OAAO,CAAC,CAAC;AACT;AACA,MAAM,MAAM;AACZ;AACA,IAAI,KAAK,aAAa;AACtB,MAAM,MAAM,CAAC,WAAW,CAAC;AACzB;AACA,QAAQ,IAAI,EAAE,OAAO,CAAC,OAAO;AAC7B,QAAQ,QAAQ,EAAE,OAAO,CAAC,QAAQ;AAClC,QAAQ,WAAW,EAAE,OAAO,CAAC,WAAW;AACxC,QAAQ,MAAM,EAAE,yBAAyB;AACzC,OAAO,CAAC,CAAC;AACT,MAAM,MAAM;AACZ;AACA,IAAI,KAAK,gBAAgB;AACzB,MAAM,MAAM,CAAC,WAAW,CAAC;AACzB,QAAQ,IAAI,EAAE,OAAO,CAAC,OAAO;AAC7B,QAAQ,QAAQ,EAAE,OAAO,CAAC,QAAQ;AAClC,QAAQ,MAAM,EAAE,yBAAyB;AACzC,OAAO,CAAC,CAAC;AACT,MAAM,MAAM;AACZ,GAAG;AACH,CAAC,CAAC,CAAC;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}